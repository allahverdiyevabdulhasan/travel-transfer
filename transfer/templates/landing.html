{% extends 'base.html' %}
{% load static %}

{% block content %}
  
    <section class="p-0">
      <div class="container-fluid px-0">
        <div class="position-relative" style="height: 19rem;">
          <div class="bg-holder"
            style="background-image:url(../../../assets/img/bg/44.png);background-position: center; background-size: cover;">
          </div>
        </div>
        <div class="container-small mb-6" style="margin-top: -12rem">
          <form method="GET" action="{% url 'search' %}">
            <div class="card position-relative mb-6">
              <div class="card-body">
                <div class="mb-4">
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" id="oneWay" type="radio" name="flight_type" value="oneway">
                    <label class="form-check-label fs-8 text-body" for="oneWay">One way</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" id="return" type="radio" name="flight_type" value="return" checked="checked">
                    <label class="form-check-label fs-8 text-body" for="return">Return</label>
                  </div>
                </div>
                <div class="row g-3 mb-4">
                  <div class="col-lg">
                    <div class="row flex-center g-2">
                      <div class="col-sm">
                        <div class="form-floating flex-1">
                          <input class="form-control" id="fromLocation" type="text" name="pickup_location" placeholder="Dhaka (DAC)">
                          <label for="fromLocation">Enter Pick-up location</label>
                        </div>
                      </div>
                      <div class="col-auto">
                        <button class="btn btn-phoenix-secondary circle-btn" type="button">
                          <span class="fas fa-arrows-rotate"></span>
                        </button>
                      </div>
                      <div class="col-sm">
                        <div class="form-floating flex-1">
                          <input class="form-control" id="toLocation" type="text" name="destination" placeholder="Sylhet (ZYL)">
                          <label for="toLocation">Enter Destination</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg">
                    <div class="row g-2">
                      <div class="col-sm-6">
                        <div class="form-floating flex-1">
                          <input class="form-control datetimepicker" id="journeyDate" type="text" name="journey_date" placeholder="dd/mm/yyyy">
                          <label class="form-label" for="journeyDate">Journey Date</label>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-floating flex-1">
                          <input class="form-control datetimepicker" id="returnDate" type="text" name="return_date" placeholder="dd/mm/yyyy">
                          <label class="form-label" for="returnDate">Return Date</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-auto">
                    <div class="form-floating" style="min-width: 13rem">
                      <input class="form-control cursor-pointer" id="travelerCount" type="text" name="passengers" placeholder="1">
                      <label for="travelerCount">Number of Passengers</label>
                    </div>
                  </div>
                  <div class="col-lg-auto">
                    <button class="btn btn-lg btn-primary flex-1" type="submit" style="max-width: 15rem">Search</button>
                  </div>
                </div>
              </div>
            </div>
          </form>
          
          <!-- Results Section -->
          {% if taxis %}
          <div class="py-7 border-top">
            <div class="row g-0 gap-6 align-items-center">
              {% for taxi in taxis %}
              <div class="col-md-4">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">{{ taxi.name }}</h5>
                    <p class="card-text">{{ taxi.pickup_location }} - {{ taxi.destination }}</p>
                    <p class="card-text">Capacity: {{ taxi.capacity }} Passengers</p>
                    <a href="{% url 'book_transfer' taxi.id %}" class="btn btn-primary">Book this Taxi</a>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% else %}
          <p>No taxis found matching your search criteria.</p>
          {% endif %}
        </div>
      </div><!-- end of .container-->
    </section><!-- <section> close ============================-->
{% endblock %}
